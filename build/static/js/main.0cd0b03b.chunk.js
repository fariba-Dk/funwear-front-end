(this["webpackJsonpfunwear-fashion"]=this["webpackJsonpfunwear-fashion"]||[]).push([[0],{50:function(e,t,c){},69:function(e,t,c){"use strict";c.r(t);var s=c(1),r=c.n(s),i=c(15),n=c.n(i),a=c(16),l=c.n(a),o=c(31),d=c(17),j=c(3),h=c(4),u=c(6),b=c(5),O=c(7);function m(e){return"$"+Number(e.toFixed(2)).toLocaleString()+" "}var x=c(9),p=c.n(x),v=c(10),f=c.n(v),g=c(11),N=c.n(g),C=c(0),S=function(e){Object(u.a)(c,e);var t=Object(b.a)(c);function c(e){var s;return Object(j.a)(this,c),(s=t.call(this,e)).openModal=function(e){s.setState({product:e})},s.closeModal=function(){s.setState({product:null})},s.state={product:null,showPromo:!0},s}return Object(h.a)(c,[{key:"render",value:function(){var e=this,t=this.state,c=t.product,s=t.showPromo;return Object(C.jsxs)("div",{children:[Object(C.jsxs)(f.a,{className:"promo",isOpen:s,style:{textAlign:"center"},children:[Object(C.jsx)("button",{onClick:function(){return e.setState({showPromo:!1})},children:"x"}),Object(C.jsx)("img",{src:"/images/discount-pic.gif",alt:"discount promo",style:{width:"100%"}})]}),Object(C.jsx)(p.a,{bottom:!0,cascade:!0,children:Object(C.jsx)("ul",{className:"products",children:this.props.products.map((function(t){var c;return Object(C.jsx)("li",{children:Object(C.jsxs)("div",{className:"product",children:[Object(C.jsxs)("a",{href:"#"+t._id,onClick:function(){return e.openModal(t)},children:[Object(C.jsx)("img",{src:t.image,alt:t.title}),Object(C.jsx)("p",{children:t.title})]}),Object(C.jsxs)("div",{className:"product-price",children:[Object(C.jsx)("div",{children:m(t.price)}),Object(C.jsx)("button",(c={className:"button-primary",onClick:function(){return e.props.addToCart(t)}},Object(O.a)(c,"className","button primary"),Object(O.a)(c,"children","Add To Cart"),c))]})]})},t._id)}))})}),c&&Object(C.jsx)(f.a,{isOpen:!0,onRequestClose:this.closeModal,children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)("button",{className:"close-modal",onClick:this.closeModal,children:"x"}),Object(C.jsxs)("div",{className:"product-details",children:[Object(C.jsx)("img",{src:c.image,alt:c.title}),Object(C.jsxs)("div",{className:"product-details-description",children:[Object(C.jsx)("p",{children:Object(C.jsx)("strong",{children:c.title})}),Object(C.jsx)("p",{children:c.description}),Object(C.jsxs)("p",{children:["Available Sizes:"," ",c.availableSizes.map((function(e){return Object(C.jsxs)("span",{children:[" ",Object(C.jsx)("button",{className:"button",children:e})]})}))]}),Object(C.jsxs)("div",{className:"product-price",children:[Object(C.jsx)("div",{children:m(c.price)}),Object(C.jsx)("button",{className:"button primary",onClick:function(){e.props.addToCart(c),e.closeModal()},children:"Add To Cart"})]})]})]})]})})]})}}]),c}(s.Component),I=function(e){Object(u.a)(c,e);var t=Object(b.a)(c);function c(){return Object(j.a)(this,c),t.apply(this,arguments)}return Object(h.a)(c,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"filter",children:[Object(C.jsxs)("div",{className:"filter-result",children:[this.props.count," Products"]}),Object(C.jsxs)("div",{className:"filter-sort",children:["Order ",Object(C.jsxs)("select",{value:this.props.sort,onChange:this.props.sortProducts,children:[Object(C.jsx)("option",{children:"Latest"}),Object(C.jsx)("option",{value:"lowest",children:"Lowest"}),Object(C.jsx)("option",{value:"highest",children:"Highest"})]})]}),Object(C.jsxs)("div",{className:"filter-size",children:["Filter",Object(C.jsxs)("select",{value:this.props.size,onChange:this.props.filterProducts,children:[Object(C.jsx)("option",{value:"",children:"All"}),Object(C.jsx)("option",{value:"XS",children:"XS"}),Object(C.jsx)("option",{value:"S",children:"S"}),Object(C.jsx)("option",{value:"M",children:"M"}),Object(C.jsx)("option",{value:"L",children:"L"}),Object(C.jsx)("option",{value:"XL",children:"XL"})]})]})]})}}]),c}(s.Component),k=function(e){Object(u.a)(c,e);var t=Object(b.a)(c);function c(e){var s;return Object(j.a)(this,c),(s=t.call(this,e)).handleInput=function(e){s.setState(Object(O.a)({},e.target.name,e.target.value))},s.createOrder=function(e){e.preventDefault();var t={name:s.state.name,email:s.state.email,address:s.state.address,cartItems:s.props.cartItems,total:s.props.cartItems.reduce((function(e,t){return e+t.price*t.count}),0)};s.setState({showCheckout:!0}),s.props.createOrder(t)},s.closeModal=function(){s.setState({showCheckout:!1})},s.state={name:"",email:"",address:"",showCheckout:!1},s}return Object(h.a)(c,[{key:"render",value:function(){var e=this,t=this.state.showCheckout,c=this.props,s=c.cartItems,r=c.order;return Object(C.jsxs)("div",{children:[0===s.length?Object(C.jsx)("div",{className:"cart cart-header",children:"Your cart is empty"}):Object(C.jsxs)("div",{className:"cart cart-header",children:["You have ",s.length," items in your cart"," "]}),r.email&&Object(C.jsx)(f.a,{isOpen:t,children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)("button",{className:"close-modal",onClick:this.closeModal,children:"x"}),Object(C.jsxs)("div",{className:"order-details",children:[Object(C.jsx)("h3",{className:"success-message",children:"Your order has been placed."}),Object(C.jsxs)("h2",{children:["Order ",r._id]}),Object(C.jsxs)("ul",{children:[Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Name:"}),Object(C.jsx)("div",{children:r.name})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Email:"}),Object(C.jsx)("div",{children:r.email})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Address:"}),Object(C.jsx)("div",{children:r.address})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Date:"}),Object(C.jsx)("div",{children:r.createdAt})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Total:"}),Object(C.jsx)("div",{children:m(r.total||0)})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Cart Items:"}),Object(C.jsx)("div",{children:r.cartItems&&r.cartItems.map((function(e){return Object(C.jsxs)("div",{children:[e.count," "," x "," ",e.title]})}))})]})]})]})]})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"cart",children:Object(C.jsx)(p.a,{left:!0,cascade:!0,children:Object(C.jsx)("ul",{className:"cart-items",children:s.map((function(t){return Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:Object(C.jsx)("img",{src:t.image,alt:t.title})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{children:t.title}),Object(C.jsxs)("div",{className:"right",children:[m(t.price)," x ",t.count," ",Object(C.jsx)("button",{className:"button",onClick:function(){return e.props.removeFromCart(t)},children:"Remove"})]})]})]},t._id)}))})})}),0!==s.length&&Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"cart",children:Object(C.jsxs)("div",{className:"total",children:[Object(C.jsxs)("div",{children:["Total:"," ",m(s.reduce((function(e,t){return e+t.price*t.count}),0))]}),Object(C.jsx)("button",{onClick:function(){e.setState({showCheckout:!0})},className:"button primary",children:"Proceed"})]})}),this.state.showCheckout&&Object(C.jsx)(p.a,{right:!0,cascade:!0,children:Object(C.jsx)("div",{className:"cart",children:Object(C.jsx)("form",{onSubmit:this.createOrder,children:Object(C.jsxs)("ul",{className:"form-container",children:[Object(C.jsxs)("li",{children:[Object(C.jsx)("label",{children:"Email"}),Object(C.jsx)("input",{name:"email",type:"email",required:!0,onChange:this.handleInput})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("label",{children:"Name"}),Object(C.jsx)("input",{name:"name",type:"text",required:!0,onChange:this.handleInput})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("label",{children:"Address"}),Object(C.jsx)("input",{name:"address",type:"text",required:!0,onChange:this.handleInput})]}),Object(C.jsx)("li",{children:Object(C.jsx)("button",{className:"button primary",type:"submit",children:"Checkout"})})]})})})})]})]})]})}}]),c}(s.Component),y=(c(50),c(18)),w=c.n(y),P=function(e){Object(u.a)(c,e);var t=Object(b.a)(c);function c(){var e;return Object(j.a)(this,c),(e=t.call(this)).createOrder=function(t){w.a.post("/api/orders",t).then((function(t){return e.setState({order:t.data})}))},e.sortProducts=function(t){var c=t.target.value;console.log(t.target.value),e.setState((function(t){return{sort:c,products:e.state.products.slice().sort((function(e,t){return"lowest"===c?e.price>t.price?1:-1:"highest"===c?e.price<t.price?1:-1:e._id<t._id?1:-1}))}}))},e.filterProducts=function(t){var c=t.target.value;""===c?e.setState({size:c}):e.setState({size:c,products:e.state.products.filter((function(e){return e.availableSizes.indexOf(c)>=0}))})},e.addToCart=function(t){var c=e.state.cartItems.slice(),s=!1;c.forEach((function(e){e._id===t._id&&(e.count++,s=!0)})),s||c.push(Object(d.a)(Object(d.a)({},t),{},{count:1})),e.setState({cartItems:c}),localStorage.setItem("cartItems",JSON.stringify(e.state.cartItems))},e.removeFromCart=function(t){var c=e.state.cartItems.slice();e.setState({cartItems:c.filter((function(e){return e._id!==t._id}))}),localStorage.setItem("cartItems",JSON.stringify(c.filter((function(e){return e._id!==t._id}))))},e.state={products:[],cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],size:"",sort:"",order:{}},e}return Object(h.a)(c,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("/api/products");case 3:t=e.sent,c=t.data,this.setState({products:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsxs)("div",{className:"grid-container",children:[Object(C.jsxs)("header",{children:[Object(C.jsx)("a",{href:"/",children:"FunWear\ud83c\udf3cFashion"}),Object(C.jsx)("a",{href:"#",alt:"admin",children:"Admin"})]}),Object(C.jsx)("main",{children:Object(C.jsxs)("div",{className:"content",children:[Object(C.jsxs)("div",{className:"main",children:[Object(C.jsx)(I,{count:this.state.products.length,sort:this.state.sort,size:this.state.size,sortProducts:this.sortProducts,filterProducts:this.filterProducts}),Object(C.jsx)(S,{products:this.state.products,addToCart:this.addToCart})]}),Object(C.jsx)("div",{className:"sidebar",children:Object(C.jsx)(k,{cartItems:this.state.cartItems,order:this.state.order,removeFromCart:this.removeFromCart,createOrder:this.createOrder})})]})}),Object(C.jsx)("footer",{children:"\xa9 FunWear\ud83c\udf3cFashion"})]})}}]),c}(r.a.Component);n.a.render(Object(C.jsx)(P,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.0cd0b03b.chunk.js.map
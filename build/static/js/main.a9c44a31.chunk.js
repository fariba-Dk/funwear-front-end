(this["webpackJsonpfunwear-fashion"]=this["webpackJsonpfunwear-fashion"]||[]).push([[0],{50:function(e,t,s){},69:function(e,t,s){"use strict";s.r(t);var c=s(1),r=s.n(c),i=s(15),n=s.n(i),a=s(16),l=s.n(a),o=s(31),d=s(17),j=s(3),h=s(4),u=s(6),b=s(5),O=s(7);function m(e){return"$"+Number(e.toFixed(2)).toLocaleString()+" "}var x=s(9),p=s.n(x),v=s(10),f=s.n(v),g=s(11),N=s.n(g),C=s(0),S=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(e){var c;return Object(j.a)(this,s),(c=t.call(this,e)).openModal=function(e){c.setState({product:e})},c.closeModal=function(){c.setState({product:null})},c.state={product:null,showPromo:!0},c}return Object(h.a)(s,[{key:"render",value:function(){var e=this,t=this.state,s=t.product,c=t.showPromo;return Object(C.jsxs)("div",{children:[Object(C.jsxs)(f.a,{className:"promo",isOpen:c,style:{textAlign:"center"},children:[Object(C.jsx)("button",{onClick:function(){return e.setState({showPromo:!1})},children:"x"}),Object(C.jsx)("img",{src:"/images/discount-pic.gif",alt:"discount promo",style:{width:"100%"}})]}),Object(C.jsx)(p.a,{bottom:!0,cascade:!0,children:Object(C.jsx)("ul",{className:"products",children:this.props.products.map((function(t){var s;return Object(C.jsx)("li",{children:Object(C.jsxs)("div",{className:"product",children:[Object(C.jsxs)("a",{href:"#"+t._id,onClick:function(){return e.openModal(t)},children:[Object(C.jsx)("img",{src:t.image,alt:t.title}),Object(C.jsx)("p",{children:t.title})]}),Object(C.jsxs)("div",{className:"product-price",children:[Object(C.jsx)("div",{children:m(t.price)}),Object(C.jsx)("button",(s={className:"button-primary",onClick:function(){return e.props.addToCart(t)}},Object(O.a)(s,"className","button primary"),Object(O.a)(s,"children","Add To Cart"),s))]})]})},t._id)}))})}),s&&Object(C.jsx)(f.a,{isOpen:!0,onRequestClose:this.closeModal,children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)("button",{className:"close-modal",onClick:this.closeModal,children:"x"}),Object(C.jsxs)("div",{className:"product-details",children:[Object(C.jsx)("img",{src:s.image,alt:s.title}),Object(C.jsxs)("div",{className:"product-details-description",children:[Object(C.jsx)("p",{children:Object(C.jsx)("strong",{children:s.title})}),Object(C.jsx)("p",{children:s.description}),Object(C.jsxs)("p",{children:["Available Sizes:"," ",s.availableSizes.map((function(e){return Object(C.jsxs)("span",{children:[" ",Object(C.jsx)("button",{className:"button",children:e})]})}))]}),Object(C.jsxs)("div",{className:"product-price",children:[Object(C.jsx)("div",{children:m(s.price)}),Object(C.jsx)("button",{className:"button primary",onClick:function(){e.props.addToCart(s),e.closeModal()},children:"Add To Cart"})]})]})]})]})})]})}}]),s}(c.Component),I=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"filter",children:[Object(C.jsxs)("div",{className:"filter-result",children:[this.props.count," Products"]}),Object(C.jsxs)("div",{className:"filter-sort",children:["Order ",Object(C.jsxs)("select",{value:this.props.sort,onChange:this.props.sortProducts,children:[Object(C.jsx)("option",{children:"Latest"}),Object(C.jsx)("option",{value:"lowest",children:"Lowest"}),Object(C.jsx)("option",{value:"highest",children:"Highest"})]})]}),Object(C.jsxs)("div",{className:"filter-size",children:["Filter",Object(C.jsxs)("select",{value:this.props.size,onChange:this.props.filterProducts,children:[Object(C.jsx)("option",{value:"",children:"All"}),Object(C.jsx)("option",{value:"XS",children:"XS"}),Object(C.jsx)("option",{value:"S",children:"S"}),Object(C.jsx)("option",{value:"M",children:"M"}),Object(C.jsx)("option",{value:"L",children:"L"}),Object(C.jsx)("option",{value:"XL",children:"XL"})]})]})]})}}]),s}(c.Component),k=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(e){var c;return Object(j.a)(this,s),(c=t.call(this,e)).handleInput=function(e){c.setState(Object(O.a)({},e.target.name,e.target.value))},c.createOrder=function(e){e.preventDefault();var t={name:c.state.name,email:c.state.email,address:c.state.address,cartItems:c.props.cartItems,total:c.props.cartItems.reduce((function(e,t){return e+t.price*t.count}),0)};c.setState({showCheckout:!0}),c.props.createOrder(t)},c.closeModal=function(){c.setState({showCheckout:!1})},c.state={name:"",email:"",address:"",showCheckout:!1},c}return Object(h.a)(s,[{key:"render",value:function(){var e=this,t=this.state.showCheckout,s=this.props,c=s.cartItems,r=s.order;return Object(C.jsxs)("div",{children:[0===c.length?Object(C.jsx)("div",{className:"cart cart-header",children:"Your cart is empty"}):Object(C.jsxs)("div",{className:"cart cart-header",children:["You have ",c.length," items in your cart"," "]}),r.email&&Object(C.jsx)(f.a,{isOpen:t,children:Object(C.jsxs)(N.a,{children:[Object(C.jsx)("button",{className:"close-modal",onClick:this.closeModal,children:"x"}),Object(C.jsxs)("div",{className:"order-details",children:[Object(C.jsx)("h3",{className:"success-message",children:"Your order has been placed."}),Object(C.jsxs)("h2",{children:["Order ",r._id]}),Object(C.jsxs)("ul",{children:[Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Name:"}),Object(C.jsx)("div",{children:r.name})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Email:"}),Object(C.jsx)("div",{children:r.email})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Address:"}),Object(C.jsx)("div",{children:r.address})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Date:"}),Object(C.jsx)("div",{children:r.createdAt})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Total:"}),Object(C.jsx)("div",{children:m(r.total||0)})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:"Cart Items:"}),Object(C.jsx)("div",{children:r.cartItems&&r.cartItems.map((function(e){return Object(C.jsxs)("div",{children:[e.count," "," x "," ",e.title]})}))})]})]})]})]})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"cart",children:Object(C.jsx)(p.a,{left:!0,cascade:!0,children:Object(C.jsx)("ul",{className:"cart-items",children:c.map((function(t){return Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{children:Object(C.jsx)("img",{src:t.image,alt:t.title})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{children:t.title}),Object(C.jsxs)("div",{className:"right",children:[m(t.price)," x ",t.count," ",Object(C.jsx)("button",{className:"button",onClick:function(){return e.props.removeFromCart(t)},children:"Remove"})]})]})]},t._id)}))})})}),0!==c.length&&Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"cart",children:Object(C.jsxs)("div",{className:"total",children:[Object(C.jsxs)("div",{children:["Total:"," ",m(c.reduce((function(e,t){return e+t.price*t.count}),0))]}),Object(C.jsx)("button",{onClick:function(){e.setState({showCheckout:!0})},className:"button primary",children:"Proceed"})]})}),this.state.showCheckout&&Object(C.jsx)(p.a,{right:!0,cascade:!0,children:Object(C.jsx)("div",{className:"cart",children:Object(C.jsx)("form",{onSubmit:this.createOrder,children:Object(C.jsxs)("ul",{className:"form-container",children:[Object(C.jsxs)("li",{children:[Object(C.jsx)("label",{children:"Email"}),Object(C.jsx)("input",{name:"email",type:"email",required:!0,onChange:this.handleInput})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("label",{children:"Name"}),Object(C.jsx)("input",{name:"name",type:"text",required:!0,onChange:this.handleInput})]}),Object(C.jsxs)("li",{children:[Object(C.jsx)("label",{children:"Address"}),Object(C.jsx)("input",{name:"address",type:"text",required:!0,onChange:this.handleInput})]}),Object(C.jsx)("li",{children:Object(C.jsx)("button",{className:"button primary",type:"submit",children:"Checkout"})})]})})})})]})]})]})}}]),s}(c.Component),y=(s(50),s(18)),w=s.n(y),P=function(e){Object(u.a)(s,e);var t=Object(b.a)(s);function s(){var e;return Object(j.a)(this,s),(e=t.call(this)).createOrder=function(t){w.a.post("/api/orders",t).then((function(t){return e.setState({order:t.data})}))},e.sortProducts=function(t){var s=t.target.value;console.log(t.target.value),e.setState((function(t){return{sort:s,products:e.state.products.slice().sort((function(e,t){return"lowest"===s?e.price>t.price?1:-1:"highest"===s?e.price<t.price?1:-1:e._id<t._id?1:-1}))}}))},e.filterProducts=function(t){var s=t.target.value;""===s?e.setState({size:s}):e.setState({size:s,products:e.state.products.filter((function(e){return e.availableSizes.indexOf(s)>=0}))})},e.addToCart=function(t){var s=e.state.cartItems.slice(),c=!1;s.forEach((function(e){e._id===t._id&&(e.count++,c=!0)})),c||s.push(Object(d.a)(Object(d.a)({},t),{},{count:1})),e.setState({cartItems:s}),localStorage.setItem("cartItems",JSON.stringify(e.state.cartItems))},e.removeFromCart=function(t){var s=e.state.cartItems.slice();e.setState({cartItems:s.filter((function(e){return e._id!==t._id}))}),localStorage.setItem("cartItems",JSON.stringify(s.filter((function(e){return e._id!==t._id}))))},e.state={products:[],cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],size:"",sort:"",order:{}},e}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark((function e(){var t,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/products");case 2:t=e.sent,s=t.data,this.setState({products:s});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsxs)("div",{className:"grid-container",children:[Object(C.jsxs)("header",{children:[Object(C.jsx)("a",{href:"/",children:"FunWear\ud83c\udf3cFashion"}),Object(C.jsx)("a",{href:"#",alt:"admin",children:"Admin"})]}),Object(C.jsx)("main",{children:Object(C.jsxs)("div",{className:"content",children:[Object(C.jsxs)("div",{className:"main",children:[Object(C.jsx)(I,{count:this.state.products.length,sort:this.state.sort,size:this.state.size,sortProducts:this.sortProducts,filterProducts:this.filterProducts}),Object(C.jsx)(S,{products:this.state.products,addToCart:this.addToCart})]}),Object(C.jsx)("div",{className:"sidebar",children:Object(C.jsx)(k,{cartItems:this.state.cartItems,order:this.state.order,removeFromCart:this.removeFromCart,createOrder:this.createOrder})})]})}),Object(C.jsx)("footer",{children:"\xa9 FunWear\ud83c\udf3cFashion"})]})}}]),s}(r.a.Component);n.a.render(Object(C.jsx)(P,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.a9c44a31.chunk.js.map
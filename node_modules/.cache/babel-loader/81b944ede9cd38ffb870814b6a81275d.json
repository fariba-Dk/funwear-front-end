{"ast":null,"code":"import _regeneratorRuntime from\"/Users/faribadadko/Documents/FunWear\\uD83C\\uDF3CFashion/funwear-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/faribadadko/Documents/FunWear\\uD83C\\uDF3CFashion/funwear-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/faribadadko/Documents/FunWear\\uD83C\\uDF3CFashion/funwear-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/faribadadko/Documents/FunWear\\uD83C\\uDF3CFashion/funwear-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/faribadadko/Documents/FunWear\\uD83C\\uDF3CFashion/funwear-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/faribadadko/Documents/FunWear\\uD83C\\uDF3CFashion/funwear-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/faribadadko/Documents/FunWear\\uD83C\\uDF3CFashion/funwear-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';// import data from './data.json';\nimport Products from'./components/Products';import Filter from'./components/Filter';import Cart from'./components/Cart';import'./index.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.createOrder=function(order){axios.post('/api/orders',order).then(function(resp){return _this.setState({order:resp.data});});};_this.sortProducts=function(event){//function used to handle onchange event for sorting\n//CONVERTING TO CHANGE FUNC TO METHOD FUNC WE CAN ACCESS THIS.SET-STATE\nvar sort=event.target.value;console.log(event.target.value);_this.setState(function(state){return{sort:sort,//need to get access to filtered product\n//create a clone of array\nproducts:_this.state.products.slice().sort(function(a,b){return sort==='lowest'?a.price>b.price?1:-1:sort==='highest'?a.price<b.price?1:-1://newest _id is greater num than the oldest one\na._id<b._id?1:-1;})};});};_this.filterProducts=function(event){//function handling onchange event thru filtering thru the sizes\n//CONVERTING TO CHANGE FUNC TO METHOD FUNC WE CAN ACCESS THIS.SET-STATE\n//THE VALUE OF SIZE IS event.target.value\nvar size=event.target.value;if(size===''){_this.setState({size:size});}else{_this.setState({size:size,//for products using filter method\n//checking for size! if > 0 => the size exists\nproducts:_this.state.products.filter(function(product){return product.availableSizes.indexOf(size)>=0;})});}};_this.addToCart=function(product){//clone-copy of cartItems using slice\nvar cartItems=_this.state.cartItems.slice();var alreadyInCart=false;//using forEach arr method to iterate over cartItems arr\ncartItems.forEach(function(item){//if _id exists then ++\nif(item._id===product._id){item.count++;//set flag to true\nalreadyInCart=true;}});//if prod is not in the cart => push the prod inside cart\nif(!alreadyInCart){//instead of having product we are using the fields of prods using spread to get the fields - an instance of this product\ncartItems.push(_objectSpread(_objectSpread({},product),{},{count:1}));}//after adding new items we need to update state\n_this.setState({cartItems:cartItems});//to make the cart stay PRESERVED => after adding items and setting state, use setItem(key: string, value: string) but since cartItems is an OBJECT so we use JSON.stringify to convert obj to string AS WELL AS REMOVING THE ITEMS TOO\n//this.state\nlocalStorage.setItem('cartItems',JSON.stringify(_this.state.cartItems));};_this.removeFromCart=function(product){//create a copy -an instance of cartItems\nvar cartItems=_this.state.cartItems.slice();_this.setState({cartItems:cartItems.filter(function(x){return x._id!==product._id;})});//have to preserve the cart for remove as well\nlocalStorage.setItem('cartItems',//this is the value that we set inside the cart item on l ine 104\nJSON.stringify(cartItems.filter(function(x){return x._id!==product._id;})));};_this.state={products:[],//by default there is no item in cart\n//cartItems: [], we change JSON.parse to reverse JSON.stringify\ncartItems:localStorage.getItem('cartItems')?JSON.parse(localStorage.getItem('cartItems')):[],//else empty array\n//have to check if string cartItems exists => parse it, else []\nsize:'',//filter thru all sizes\nsort:'',//sort thru $ and $$$\norder:{}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/products');case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;this.setState({products:data});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,this,[[0,8]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()//parent component is responsible for saving the order\n},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"grid-container\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"FunWear\\uD83C\\uDF3CFashion\"})}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(Filter//passing count & sort & size as props to Filter\n,{count:this.state.products.length,sort:this.state.sort,size:this.state.size// functions handling onChange events\n,sortProducts:this.sortProducts,filterProducts:this.filterProducts}),/*#__PURE__*/_jsx(Products,{products:this.state.products//adding we define addToCart as a property\n//this.addToCart is responsible for it\n,addToCart:this.addToCart})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar\",children:/*#__PURE__*/_jsx(Cart//the cartItems comes from this.state.cartItems\n,{cartItems:this.state.cartItems,order:this.state.order,removeFromCart:this.removeFromCart,createOrder:this.createOrder})})]})}),/*#__PURE__*/_jsx(\"footer\",{children:\"\\xA9 FunWear\\uD83C\\uDF3CFashion\"})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/faribadadko/Documents/FunWearðŸŒ¼Fashion/funwear-front-end/src/App.js"],"names":["React","Products","Filter","Cart","axios","App","createOrder","order","post","then","resp","setState","data","sortProducts","event","sort","target","value","console","log","state","products","slice","a","b","price","_id","filterProducts","size","filter","product","availableSizes","indexOf","addToCart","cartItems","alreadyInCart","forEach","item","count","push","localStorage","setItem","JSON","stringify","removeFromCart","x","getItem","parse","get","length","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n// import data from './data.json';\nimport Products from './components/Products';\nimport Filter from './components/Filter';\nimport Cart from './components/Cart';\nimport './index.css';\nimport axios from 'axios';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      products: [],\n      //by default there is no item in cart\n      //cartItems: [], we change JSON.parse to reverse JSON.stringify\n      cartItems: localStorage.getItem('cartItems')\n        ? JSON.parse(localStorage.getItem('cartItems'))\n        : [], //else empty array\n      //have to check if string cartItems exists => parse it, else []\n      size: '', //filter thru all sizes\n      sort: '', //sort thru $ and $$$\n      order: {},\n    };\n  }\n  async componentDidMount() {\n    try{\n      const { data } = await axios.get('/api/products');\n      this.setState({\n      products: data,\n    });\n    }catch(error){\n      console.log(error)\n    }\n  }\n  //parent component is responsible for saving the order\n  createOrder = (order) => {\n    axios.post('/api/orders', order).then((resp) =>\n      this.setState({\n        order: resp.data,\n      })\n    );\n  };\n\n  //SORT METHOD ON LOWEST/HIGHEST/NEWEST\n  sortProducts = (event) => {\n    //function used to handle onchange event for sorting\n    //CONVERTING TO CHANGE FUNC TO METHOD FUNC WE CAN ACCESS THIS.SET-STATE\n    const sort = event.target.value;\n    console.log(event.target.value);\n    this.setState((state) => ({\n      sort: sort,\n      //need to get access to filtered product\n      //create a clone of array\n      products: this.state.products.slice().sort((a, b) =>\n        sort === 'lowest'\n          ? a.price > b.price\n            ? 1\n            : -1\n          : sort === 'highest'\n          ? a.price < b.price\n            ? 1\n            : -1\n          : //newest _id is greater num than the oldest one\n          a._id < b._id\n          ? 1\n          : -1\n      ),\n    }));\n  };\n\n  //FILTER METHOD ON SIZE\n  filterProducts = (event) => {\n    //function handling onchange event thru filtering thru the sizes\n    //CONVERTING TO CHANGE FUNC TO METHOD FUNC WE CAN ACCESS THIS.SET-STATE\n    //THE VALUE OF SIZE IS event.target.value\n    let size = event.target.value;\n    if (size === '') {\n      this.setState({\n        size: size,\n      });\n    } else {\n      this.setState({\n        size: size,\n        //for products using filter method\n        //checking for size! if > 0 => the size exists\n        products: this.state.products.filter(\n          (product) => product.availableSizes.indexOf(size) >= 0\n        ),\n      });\n    }\n  };\n\n  //ADD TO CART - method\n  addToCart = (product) => {\n    //clone-copy of cartItems using slice\n    const cartItems = this.state.cartItems.slice();\n    let alreadyInCart = false;\n    //using forEach arr method to iterate over cartItems arr\n    cartItems.forEach((item) => {\n      //if _id exists then ++\n      if (item._id === product._id) {\n        item.count++;\n        //set flag to true\n        alreadyInCart = true;\n      }\n    });\n    //if prod is not in the cart => push the prod inside cart\n    if (!alreadyInCart) {\n      //instead of having product we are using the fields of prods using spread to get the fields - an instance of this product\n      cartItems.push({ ...product, count: 1 });\n    } //after adding new items we need to update state\n    this.setState({ cartItems });\n    //to make the cart stay PRESERVED => after adding items and setting state, use setItem(key: string, value: string) but since cartItems is an OBJECT so we use JSON.stringify to convert obj to string AS WELL AS REMOVING THE ITEMS TOO\n    //this.state\n    localStorage.setItem('cartItems', JSON.stringify(this.state.cartItems));\n  };\n\n  //REMOVE FROM CART\n  removeFromCart = (product) => {\n    //create a copy -an instance of cartItems\n    const cartItems = this.state.cartItems.slice();\n    this.setState({\n      cartItems: cartItems.filter((x) => x._id !== product._id),\n    }); //have to preserve the cart for remove as well\n    localStorage.setItem(\n      'cartItems',\n      //this is the value that we set inside the cart item on l ine 104\n      JSON.stringify(cartItems.filter((x) => x._id !== product._id))\n    );\n  };\n\n  render() {\n    return (\n      <div className='grid-container'>\n        <header>\n          <a href='/'>FunWearðŸŒ¼Fashion</a>\n        </header>\n        <main>\n          <div className='content'>\n            <div className='main'>\n              <Filter\n                //passing count & sort & size as props to Filter\n                count={this.state.products.length}\n                sort={this.state.sort}\n                size={this.state.size}\n                // functions handling onChange events\n                sortProducts={this.sortProducts}\n                filterProducts={this.filterProducts}\n              ></Filter>\n              <Products\n                products={this.state.products}\n                //adding we define addToCart as a property\n                //this.addToCart is responsible for it\n                addToCart={this.addToCart}\n              ></Products>\n            </div>\n            <div className='sidebar'>\n              <Cart\n                //the cartItems comes from this.state.cartItems\n                cartItems={this.state.cartItems}\n                order={this.state.order}\n                removeFromCart={this.removeFromCart}\n                createOrder={this.createOrder}\n              />\n            </div>\n          </div>\n        </main>\n        <footer>Â© FunWearðŸŒ¼Fashion</footer>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}